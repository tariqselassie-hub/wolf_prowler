[package]
name = "wolf_db"
version = "0.1.0"
edition = "2021"
description = "Post-Quantum Cryptographic Database with ML-L2 Vector Search and Dilithium Signatures"
license = "MIT"
authors = ["Terrence A. Jones <tariqselassie@gmail.com>"]
repository = "https://github.com/tariqselassie-hub/wolf_prowler"
keywords = ["database", "cryptography", "post-quantum", "ml", "vector-search"]
categories = ["database", "cryptography"]
rust-version = "1.70"

[dependencies]
# Core storage
sled = "0.34"
serde = { workspace = true }
serde_json = { workspace = true }
aes-gcm = "0.10"
anyhow = { workspace = true }
thiserror = { workspace = true }
bincode = "1.3"
rayon = "1.8"
tracing = { workspace = true }
tracing-subscriber = { workspace = true }
rand = { workspace = true }
uuid = { workspace = true }
argon2 = "0.5"
base64 = "0.22"
lettre = { version = "0.11", default-features = false, features = ["tokio1-native-tls", "smtp-transport", "builder", "hostname"], optional = true }
tokio = { workspace = true }
secrecy = "0.8"
zeroize = { workspace = true, features = ["derive"] }
rusqlite = { version = "0.30.0", features = ["bundled"], optional = true }
chrono = { workspace = true }

# Post-quantum cryptography (optional)
pqc_kyber = { version = "0.7", optional = true }
fips204 = { version = "0.4.6", optional = true }

# Vector search / ML (optional)
hnsw_rs = { version = "0.3", optional = true }
nalgebra = { version = "0.33", optional = true }

# HSM support (optional)
cryptoki = { version = "0.6", optional = true }

# CLI dependencies (optional)
clap = { workspace = true, optional = true }
rustyline = { version = "12.0", optional = true }
dialoguer = { version = "0.11", optional = true }
colored = { version = "2.1", optional = true }
shlex = { version = "1.3", optional = true }
comfy-table = { version = "7.1", optional = true }

# Web server
axum = { version = "0.7", features = ["macros", "ws", "multipart"] }
tower = "0.5"
tower-http = { version = "0.5", features = ["cors", "fs", "trace", "timeout"] }

# Authentication & sessions
jsonwebtoken = "9.2"

# WebSocket
tokio-tungstenite = "0.21"

# Additional utilities
serde_qs = "0.12"
mime = "0.3"
futures-util = "0.3"

[features]
default = ["storage", "web", "pqc", "ml"]
storage = ["sled"]
web = ["axum", "tower", "tower-http", "jsonwebtoken", "tokio-tungstenite"]
cli = ["clap", "rustyline", "dialoguer", "colored", "shlex", "comfy-table", "rusqlite"]

# Post-quantum cryptography
pqc = ["pqc_kyber", "fips204"]

# Vector search / ML
ml = ["hnsw_rs", "nalgebra"]

# Hardware security module support
hsm = ["cryptoki"]

# Email backup support
email = ["lettre"]

# All features enabled
full = ["default", "cli", "hsm", "email", "rusqlite"]

[dev-dependencies]
tempfile = "3.8"
criterion = { version = "0.5", features = ["html_reports"] }
clap = { workspace = true }
rustyline = "12.0"
dialoguer = "0.11"
colored = "2.1"
shlex = "1.3"
comfy-table = "7.1"

[[bench]]
name = "crypto_bench"
harness = false

[[bench]]
name = "storage_bench"
harness = false

[[bin]]
name = "wolfdb"
path = "src/main.rs"
required-features = ["cli"]

[lints]
workspace = true
