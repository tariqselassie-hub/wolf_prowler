<!DOCTYPE html>
<html>
<head>
    <title>API Documentation - Wolf Prowler</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px); }
        .mono { font-family: monospace; }
        .highlight { background: rgba(59, 130, 246, 0.3); }
    </style>
</head>
<body class="bg-black text-white p-8">
    <div class="max-w-6xl mx-auto">
        <header class="mb-8">
            <h1 class="text-3xl font-bold mb-2">Wolf Prowler API Documentation</h1>
            <p class="text-gray-400">Interactive API testing and documentation</p>
            <div class="flex space-x-4 mt-4">
                <a href="/dashboard_modern.html" class="text-blue-400 hover:text-blue-300">← Home</a>
                <a href="/api-test.html" class="text-blue-400 hover:text-blue-300">← API Test Dashboard</a>
            </div>
        </header>

        <!-- Search Bar -->
        <div class="glass rounded-lg p-4 border border-gray-700 mb-8">
            <div class="flex items-center space-x-4">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Search APIs... (e.g., hash, security, network)"
                    class="flex-1 bg-gray-800 border border-gray-600 rounded px-4 py-2 text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"
                    onkeyup="searchAPIs()"
                >
                <button onclick="clearSearch()" class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded text-sm">
                    Clear
                </button>
            </div>
            <div id="searchResults" class="mt-3 text-sm text-gray-400"></div>
        </div>

        <div id="apiGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Cryptography APIs -->
            <div class="glass rounded-lg p-6 border border-purple-500/30" data-category="cryptography" data-endpoints="hash,kdf,mac">
                <h2 class="text-xl font-semibold mb-4 text-purple-400">Cryptography</h2>
                <div class="space-y-3">
                    <a href="/api/cryptography/hash-api.html" class="api-link block bg-purple-900/20 hover:bg-purple-900/40 p-3 rounded border border-purple-500/50" data-search="hash cryptography generate">
                        <div class="font-mono text-sm">POST /api/hash</div>
                        <div class="text-xs text-gray-400">Generate cryptographic hashes</div>
                    </a>
                    <a href="/api/cryptography/kdf-api.html" class="api-link block bg-purple-900/20 hover:bg-purple-900/40 p-3 rounded border border-purple-500/50" data-search="kdf cryptography key derivation">
                        <div class="font-mono text-sm">POST /api/kdf</div>
                        <div class="text-xs text-gray-400">Key derivation functions</div>
                    </a>
                    <a href="/api/cryptography/mac-api.html" class="api-link block bg-purple-900/20 hover:bg-purple-900/40 p-3 rounded border border-purple-500/50" data-search="mac cryptography authentication">
                        <div class="font-mono text-sm">POST /api/mac</div>
                        <div class="text-xs text-gray-400">Message authentication codes</div>
                    </a>
                </div>
            </div>

            <!-- Security APIs -->
            <div class="glass rounded-lg p-6 border border-green-500/30" data-category="security" data-endpoints="security/status,security/events,security/threats">
                <h2 class="text-xl font-semibold mb-4 text-green-400">Security</h2>
                <div class="space-y-3">
                    <a href="/api/security/security-status-api.html" class="api-link block bg-green-900/20 hover:bg-green-900/40 p-3 rounded border border-green-500/50" data-search="security status firewall encryption">
                        <div class="font-mono text-sm">GET /api/security/status</div>
                        <div class="text-xs text-gray-400">Security system status</div>
                    </a>
                    <a href="/api/security/security-events-api.html" class="api-link block bg-green-900/20 hover:bg-green-900/40 p-3 rounded border border-green-500/50" data-search="security events logs authentication">
                        <div class="font-mono text-sm">GET /api/security/events</div>
                        <div class="text-xs text-gray-400">Security event logs</div>
                    </a>
                    <a href="/api/security/security-threats-api.html" class="api-link block bg-green-900/20 hover:bg-green-900/40 p-3 rounded border border-green-500/50" data-search="security threats suspicious activity">
                        <div class="font-mono text-sm">GET /api/security/threats</div>
                        <div class="text-xs text-gray-400">Security threat intelligence</div>
                    </a>
                </div>
            </div>

            <!-- Network APIs -->
            <div class="glass rounded-lg p-6 border border-blue-500/30" data-category="network" data-endpoints="peers,network/status">
                <h2 class="text-xl font-semibold mb-4 text-blue-400">Network</h2>
                <div class="space-y-3">
                    <a href="/api/network/peers-api.html" class="api-link block bg-blue-900/20 hover:bg-blue-900/40 p-3 rounded border border-blue-500/50" data-search="peers network nodes connections">
                        <div class="font-mono text-sm">GET /api/peers</div>
                        <div class="text-xs text-gray-400">Network peer information</div>
                    </a>
                    <a href="/api/network/network-status-api.html" class="api-link block bg-blue-900/20 hover:bg-blue-900/40 p-3 rounded border border-blue-500/50" data-search="network status health metrics latency">
                        <div class="font-mono text-sm">GET /api/network/status</div>
                        <div class="text-xs text-gray-400">Network health metrics</div>
                    </a>
                </div>
            </div>
        </div>

        <div id="noResults" class="hidden glass rounded-lg p-8 border border-gray-700 text-center">
            <div class="text-gray-400 text-lg mb-2">No APIs found</div>
            <div class="text-gray-500 text-sm">Try searching for: hash, security, network, cryptography</div>
        </div>

        <!-- Quick Test Section -->
        <div class="glass rounded-lg p-6 border border-gray-700 mt-8">
            <h2 class="text-xl font-semibold mb-4">Quick API Test</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button onclick="quickTest('hash')" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded text-sm">
                    Test Hash
                </button>
                <button onclick="quickTest('security/status')" class="bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm">
                    Test Security
                </button>
                <button onclick="quickTest('peers')" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm">
                    Test Peers
                </button>
                <button onclick="quickTestAll()" class="bg-orange-600 hover:bg-orange-700 px-4 py-2 rounded text-sm">
                    Test All
                </button>
            </div>
            <div id="quick-results" class="mt-4 text-xs mono bg-gray-900 rounded p-3 h-32 overflow-y-auto">
                <div class="text-gray-500">Click a test button to see results...</div>
            </div>
        </div>
    </div>

    <script>
        async function quickTest(endpoint) {
            const results = document.getElementById('quick-results');
            try {
                const headers = {'X-API-Key': 'dev-key-12345'};
                const response = await fetch(`/api/${endpoint}`, {headers});
                const data = await response.json();
                results.innerHTML = `
                    <div class="text-green-400">✅ ${endpoint} - ${response.status}</div>
                    <div class="text-gray-300">${JSON.stringify(data, null, 2)}</div>
                `;
            } catch (error) {
                results.innerHTML = `
                    <div class="text-red-400">❌ ${endpoint} - Error</div>
                    <div class="text-red-300">${error.message}</div>
                `;
            }
        }

        async function quickTestAll() {
            const endpoints = ['hash', 'security/status', 'peers'];
            const results = document.getElementById('quick-results');
            results.innerHTML = '<div class="text-yellow-400">Testing all endpoints...</div>';
            
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(`/api/${endpoint}`, {
                        method: endpoint === 'hash' ? 'POST' : 'GET',
                        headers: { 
                            'Content-Type': 'application/json',
                            'X-API-Key': 'dev-key-12345'
                        },
                        body: endpoint === 'hash' ? JSON.stringify({data: 'test'}) : undefined
                    });
                    const status = response.ok ? '✅' : '❌';
                    results.innerHTML += `<div class="${response.ok ? 'text-green-400' : 'text-red-400'}">${status} ${endpoint} - ${response.status}</div>`;
                } catch (error) {
                    results.innerHTML += `<div class="text-red-400">❌ ${endpoint} - Error</div>`;
                }
            }
        }

        function searchAPIs() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const apiGrid = document.getElementById('apiGrid');
            const noResults = document.getElementById('noResults');
            const searchResults = document.getElementById('searchResults');
            const categories = apiGrid.querySelectorAll('[data-category]');
            let foundCount = 0;

            if (searchTerm === '') {
                // Show all categories
                categories.forEach(cat => {
                    cat.style.display = 'block';
                    cat.classList.remove('highlight');
                });
                categories.forEach(cat => {
                    const links = cat.querySelectorAll('.api-link');
                    links.forEach(link => {
                        link.style.display = 'block';
                        link.classList.remove('highlight');
                    });
                });
                noResults.classList.add('hidden');
                searchResults.textContent = '';
                return;
            }

            // Search through categories and endpoints
            categories.forEach(category => {
                const categoryData = category.dataset.category.toLowerCase();
                const endpoints = category.dataset.endpoints.toLowerCase();
                const links = category.querySelectorAll('.api-link');
                let categoryHasMatch = false;

                // Check category match
                if (categoryData.includes(searchTerm)) {
                    category.style.display = 'block';
                    category.classList.add('highlight');
                    links.forEach(link => link.style.display = 'block');
                    categoryHasMatch = true;
                    foundCount++;
                }
                // Check endpoints match
                else if (endpoints.includes(searchTerm)) {
                    category.style.display = 'block';
                    category.classList.add('highlight');
                    links.forEach(link => {
                        const searchData = link.dataset.search.toLowerCase();
                        if (searchData.includes(searchTerm)) {
                            link.style.display = 'block';
                            link.classList.add('highlight');
                            categoryHasMatch = true;
                        } else {
                            link.style.display = 'none';
                        }
                    });
                    if (categoryHasMatch) foundCount++;
                }
                // Check individual link search data
                else {
                    links.forEach(link => {
                        const searchData = link.dataset.search.toLowerCase();
                        if (searchData.includes(searchTerm)) {
                            link.style.display = 'block';
                            link.classList.add('highlight');
                            category.style.display = 'block';
                            category.classList.add('highlight');
                            categoryHasMatch = true;
                        } else {
                            link.style.display = 'none';
                        }
                    });
                    if (categoryHasMatch) foundCount++;
                }

                if (!categoryHasMatch) {
                    category.style.display = 'none';
                }
            });

            // Show results count
            if (foundCount > 0) {
                searchResults.textContent = `Found ${foundCount} matching categor${foundCount === 1 ? 'y' : 'ies'}`;
                noResults.classList.add('hidden');
            } else {
                searchResults.textContent = '';
                noResults.classList.remove('hidden');
            }
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            searchAPIs();
        }
    </script>
</body>
</html>
